{
{%- for res_type,res_docs in results -%}
	"{{ res_type}}":
	[
		{%- for doc in res_docs -%}
		{
			{%- set doc_fields = doc.getFields() -%}
			"id": {{ doc_fields.id }},
			"site_id": "1",
			{%- if doc_fields.user_id is defined -%}
				"user_id": "{{ doc_fields.user_id }}",
			{%- else -%}
				"user_id": "1",
			{%- endif -%}
			{%- if doc_fields.title_i is defined -%}
				"title": "{{ doc_fields.title_i }}",
			{%- else -%}
				"title": "",
			{%- endif -%}			
			{%- if doc_fields.description_i is defined -%}
				"description": "{{ doc_fields.description_i|json_encode  }}",
			{%- else -%}
				"description": "",
			{%- endif -%}
			{%- if doc_fields.text_i is defined -%}
				"text": "{{ doc_fields.text_i|json_encode }}",
			{%- else -%}
				"text": "",
			{%- endif -%}
			
			"uri": "{{ doc_fields.uri }}",
			"attribution_uri": "{{ doc_fields.attribution_uri }}",
			"date_created": "2012-01-02T00:00:00",
			"media_type": "{{ doc_fields.media_type }}",
			"media_id": null,
			"metadata_id": null,
			"layer_type": "{{ doc_fields.layer_type }}",
			{%- if doc_fields.thumbnail_url is defined -%}
				"thumbnail_url": "{{ doc_fields.thumbnail_url }}",
			{%- else -%}
				"thumbnail_url": "",
			{%- endif -%}
			"child_items_count": {{ doc_fields.child_items_count }},
			"media_creator_username": "{{ doc_fields.media_creator_username }}",
			"media_creator_realname": "{{ doc_fields.media_creator_username }}",
			"archive": "{{ doc_fields.archive }}",
			{%- if doc_fields.media_date_created is defined -%}
				"media_date_created" : "2012-01-02T00:00:00",
			{%- else -%}
				"media_date_created" : "2012-01-02T00:00:00",
			{%- endif -%}
			{%- if doc_fields.media_date_created_end is defined -%}
				"media_date_created_end" : "2012-01-02T00:00:00",
			{%- else -%}
				"media_date_created_end" : "2012-01-02T00:00:00",
			{%- endif -%}
			{%- if doc_fields.tag_name is defined -%}
				"tags" : "{{doc_fields.tag_name|join(",")}}"
			{%- else -%}
				"tags" : ""
			{%- endif -%},
			"media_geo_latitude": null,
			"media_geo_longitude": null
		}
		{%- if loop.index0 < res_docs|length - 1 -%}
		,
		{%- endif -%}
		{%- endfor -%}

	],
	"returned_{{res_type}}_count": {{res_docs|length}},
	"{{res_type}}_count": {{res_docs.getNumFound}}
	{%- if loop.index0 < results|length - 1%}
	,
	{%- endif -%}	
{%- endfor -%},
"tags":[
{%- for tag_name, tag_count in tags -%}
{
	"name" : "{{tag_name}}",
	"id": "18751",
	"occurrences" : "{{tag_count}}"
}
	{%- if loop.index0 < tags|length - 1 -%}
	,
	{%- endif -%}
{%- endfor -%}
]
}